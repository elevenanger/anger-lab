package exploitableparallelism.renderer;

import cn.anger.timer.stopwatch.StopWatch;

import java.util.ArrayList;
import java.util.List;

/**
 * @author : anger
 */
public class SingleThreadImageRenderer extends SimpleImageRenderer {
    @Override
    void renderPage(CharSequence source) {
        StopWatch stopWatch = StopWatch.get();
        stopWatch.start("single thread image renderer");
        // 首先渲染文本
        renderText(source);
        List<ImageData> data = new ArrayList<>();
        // 扫描字符中的图片信息
        for (ImageInfo info: scanForImageInfo(source))
            // 下载图片，添加到图片数据列表中
            data.add(info.downloadImage());
        // 渲染列表中的每一个图片
        for (ImageData imageData: data)
            renderImage(imageData);
        stopWatch.stopAndPrint();
    }
}
